'use strict';

var test = require('tape');
var gOPD = require('../');

test('gOPD', function (t) {
	t.test('supported', { skip: !gOPD }, function (st) {
		st.equal(typeof gOPD, 'function', 'is a function');

		var obj = { x: 1 };
		st.ok('x' in obj, 'property exists');

<<<<<<< HEAD
=======
		// @ts-expect-error TS can't figure out narrowing from `skip`
>>>>>>> 5d25e61f93a9fef8b8f81247713b777d29e26114
		var desc = gOPD(obj, 'x');
		st.deepEqual(
			desc,
			{
				configurable: true,
				enumerable: true,
				value: 1,
				writable: true
			},
			'descriptor is as expected'
		);

		st.end();
	});

<<<<<<< HEAD
	t.test('not supported', { skip: gOPD }, function (st) {
=======
	t.test('not supported', { skip: !!gOPD }, function (st) {
>>>>>>> 5d25e61f93a9fef8b8f81247713b777d29e26114
		st.notOk(gOPD, 'is falsy');

		st.end();
	});

	t.end();
});
